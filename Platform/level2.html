<html>
	<head>
		<title> Platform Game </title>
		<script src="https://simplycodingcourses.com/files/simply.js"></script>
		<script src="script.js"></script>
		<script>
			function start(){
				start2();
				sjs.loadImageArray('[{"width":136,"height":30,"x":225,"y":443,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":597,"y":399,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":81,"height":93,"x":-22354,"y":10381253,"sx":-5,"sy":4557,"ay":1,"topSpeed":10,"src":"Images/l_enemy.gif","alt":"add text","type":"enemy","facingLeft":true,"left_img":"Images/l_enemy.gif","right_img":"Images/r_enemy.gif","friction":0,"classType":"Image","noBounds":true},{"width":25,"height":30,"x":433.5,"y":426,"sx":0,"sy":0,"topSpeed":10,"src":"Images/score.gif","alt":"add text","type":"score","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":371,"y":326,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":550,"y":230,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":25,"height":30,"x":610.3065496909842,"y":181,"sx":0,"sy":0,"topSpeed":10,"src":"Images/score.gif","alt":"add text","type":"score","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":796.6304447709025,"y":325,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":1033.1892287501273,"y":405,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":1362.2742420088935,"y":396,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":21,"height":30,"x":1250.7742420088935,"y":456,"sx":0,"sy":0,"topSpeed":10,"src":"Images/power_up.png","alt":"add text","type":"powerUp","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":1680.354819806437,"y":378,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":1530.931853838573,"y":306,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":1697.8978212216216,"y":212,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":1925.9806911170201,"y":105,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":2107.3063807804147,"y":239,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":2351,"y":111,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":136,"height":30,"x":2322,"y":424,"sx":0,"sy":0,"topSpeed":10,"src":"Images/platform.png","alt":"add text","type":"platform","friction":0.05,"classType":"Image"},{"width":25,"height":30,"x":1975.962623099334,"y":78,"sx":0,"sy":0,"topSpeed":10,"src":"Images/score.gif","alt":"add text","type":"score","friction":0.05,"classType":"Image"},{"width":81,"height":93,"x":-8439,"y":1564297,"sx":-5,"sy":1769,"ay":1,"topSpeed":10,"src":"Images/l_enemy.gif","alt":"add text","type":"enemy","facingLeft":true,"left_img":"Images/l_enemy.gif","right_img":"Images/r_enemy.gif","friction":0,"classType":"Image","noBounds":true},{"width":25,"height":30,"x":2375.5,"y":377,"sx":0,"sy":0,"topSpeed":10,"src":"Images/score.gif","alt":"add text","type":"score","friction":0.05,"classType":"Image"},{"width":25,"height":30,"x":1751.9806911170197,"y":339,"sx":0,"sy":0,"topSpeed":10,"src":"Images/score.gif","alt":"add text","type":"score","friction":0.05,"classType":"Image"},{"width":81,"height":93,"x":471,"y":407,"sx":5,"sy":0,"ay":1,"topSpeed":10,"src":"Images/r_enemy.gif","alt":"add text","type":"enemy","facingLeft":false,"left_img":"Images/l_enemy.gif","right_img":"Images/r_enemy.gif","friction":0,"classType":"Image","noBounds":true},{"width":31,"height":80,"x":2402.5,"y":22,"sx":0,"sy":0,"topSpeed":10,"src":"Images/flag_bad.png","alt":"add text","type":"flag","friction":0.05,"classType":"Image"}]');

				//player properties

				var player = new sjs.Image("Images/r_idle.png");
				player.type = "player";
				player.setSize(85,93);
				player.setGravity(3);
				player.bottom();
				player.friction = .3;
				player.noBounds = true;

				sjs.scrollable(player,background);

				//player controls

				var r_images = ["Images/r_walk-0.png","Images/r_walk-1.png","Images/r_walk-2.png","Images/r_walk-3.png","Images/r_walk-4.png","Images/r_walk-5.png","Images/r_walk-6.png","Images/r_walk-7.png"];

				var l_images = ["Images/l_walk-0.png","Images/l_walk-1.png","Images/l_walk-2.png","Images/l_walk-3.png","Images/l_walk-4.png","Images/l_walk-5.png","Images/l_walk-6.png","Images/l_walk-7.png"];

				var r_faceing = true;
				var r_track = 0;
				var l_track = 0;


				window.addEventListener("keydown", event => {
					if (event.key == "ArrowDown") {
						if(canShoot == true){
							canShoot = false;
							var laser = new sjs.Image("Images/laser.png");
							laser.type = "laser";
							laser.setSize(100,50);
							laser.friction= 0;
							laser.noBounds= true;
							if(r_faceing == true){
							laser.moveTo(player.getX()+44,player.getY()+7);
							laser.pushRight(45.5);

						} else {
							laser.moveTo(player.getX()+-60,player.getY()+7);
							laser.pushLeft(45.5);

							}

						setTimeout(function(){
						canShoot = true;
						},1000);

						}
					}

				});//end keyDown functions

				var wall = new sjs.Image("Images/wall.png");
				wall.moveTo(2348, 1);
				wall.type = "wall";
				wall.setSize(15,150);

				//onHit Code Below!!!

				sjs.onHit("player","platform", function(x,y){
					sjs.stoppedBy(x,y);
					if(canJump == false && x.y < y.y-85){
						canJump = true;
						r_track = 0;
						l_track = 0;

					}

				});



				sjs.onHit("player","platform3", function(x,y){
					window.location = "Win_1.html";

				});

				var canShoot = false;
				sjs.onHit("player","powerUp", function(x,y){
					canShoot = true;
					y.destroy();
				
				});

				var score = 0;
				var score_txt = new sjs.Text("score:0", 21, "green");
				score_txt.right().offset(-20, 0);
				score_txt.fixed = true;

				sjs.onHit("player","score", function(x,y){
					score = score + 1;
					score_txt.setText("Score :"+ score);
					localStorage.setItem("score", score);
					y.destroy();
					if(score == 5){
						wall.destroy();

					}

				});

				var flagOn = true;
				sjs.onHit("player","flag", function(x,y){
					x.stop();
					if(flagOn == true){
						flagOn = false;
						setTimeout(function(){
							y.setImage("Images/flag_none.png");

						},800);

						setTimeout(function(){
							y.setImage("Images/flag_win.png");

						},1600);

						setTimeout(function(){
							window.location = "Win_2.html";
					
						},2400);

					} //end if statement

				});


				sjs.onHit("player","bottom_screen",function(x,y){
					sjs.stoppedBy(x,y);
					if(canJump == false){
						canJump = true;
						r_track = 0;
						l_track = 0;

					}

				});

				sjs.onHit("player",["right_screen","left_screen","top_screen"],function(x,y){
					sjs.stoppedBy(x,y);

				});

				sjs.onHit("enemy","bottom_screen", function(x,y){
					sjs.stoppedBy(x,y);

				});

				sjs.onHit("enemy",["left_screen","right_screen"], function(x,y){
					sjs.bounceOff(x,y);

				});

				sjs.onHit("enemy","platform", function(x,y){
					if(x.isAboveOf(y) == true){
						sjs.stoppedBy(x,y);

					} else {
						sjs.bounceOff(x,y);

					}

				});

				sjs.onHit("player","jump_pad", function(x,y){
					if(x.isAboveOf(y) == true){
						player.pushUp(50);

					} else {
						sjs.stoppedBy(x,y);

					}
				
				});

				sjs.onHit("player","enemy", function(x,y){
					x.destroy();
					window.location = "gameover.html";

				});

				sjs.onHit("laser","enemy", function(x,y){
					x.destroy();
					y.destroy();

				});

				sjs.onHit("laser",["platform","jump_pad", "powerUp","score","flag"], function(x,y){
					sjs.bounceOff(x,y);

				});

				sjs.onHit("laser",["right_screen","left_screen"], function(x,y){
					x.destroy();

				});

				sjs.onHit("player","top_screen", function(x,y){
					x.bounceOff();

				});

				var music_txt = new sjs.Text("Press the m key for some music!", 21, "white");
			music_txt.moveTo(250, 0);

		
			setTimeout(function(){
			
			music_txt.destroy();
			
			},2000);






		}


		</script>
	</head>
	<body onload="start()">
		<h1> Platform Game </h1>
		
		<div id="target" style="margin:auto;background:grey;"></div>
	</body>
</html>
